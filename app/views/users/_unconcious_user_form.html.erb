<%= form_for @user,:url => "/users/create_unconcious_user", :html => {id: "create_user", multipart: true} do |f| %>
	<div class="second_col_header">
	      <div class="title_heading">
			<img src="/assets/back_butn.png"  class="hand_cursor" alt="back"  onclick="enable_prev_step('.third_col','.second_col');"/>Back
	      </div>
	      <div class="title_heading_sep"></div>
	</div>
	<div class="show_result">Create a new user by filling the below form :</div>

	  <div class="media">
        <div class="media-middle">
          <img class="media-object search_user_img" src="/assets/user.png" alt="..." id='new_user_img' height="55px" width="55px">
		  <a href="#" id="add_pro_pic"> Add Image </a>
        </div>
        <%= f.file_field 'profile_pic', id: 'user_pic', style: 'display:none' %>
	 </div>

	  <div class="user_separator"></div>
      <div class="input-group col-lg-12 margin-top15">
      	<label class="col-lg-12 no-padding">Enter Name*
        	<%= f.text_field :name, :class => "form-control pass_text", :required => true %> 
        </label>
      </div>
      <div class="input-group col-lg-12 margin-top15">
      	<label class="col-lg-12 no-padding">Working at
        	<%= f.text_field :working_at,  :class => "form-control pass_text" %> 
        </label>
      </div>

      <div class="input-group col-lg-12 margin-top15">
        <label class="col-lg-12 no-padding">Tags</label>
        <%= fields_for :tags do |tag_fields| %>
          <div class="input-group col-lg-12 margin-top15">
            <%= tag_fields.text_field :name, class: 'form-control pass_text col-lg-12', placeholder: '' %>
          </div>
        <% end %>
      </div>
      <div class="input-group col-lg-12 margin-top15">
      	<label class="col-lg-12 no-padding">Passions
        	<%= f.text_field :passions, :class => "form-control pass_text col-lg-12" %> 
        </label>
      </div>
      <div class="input-group col-lg-12 margin-top15">
      	<label class="col-lg-12 no-padding">Language
        	<%= f.text_field :languages, :class => "form-control pass_text col-lg-12" %> 
        </label>
      </div>
      <div class="input-group col-lg-12 margin-top15">
        <label class="col-lg-12 no-padding">Skills</label>
        <%= fields_for :skills do |skill_fields| %>
          <div class="input-group col-lg-12 margin-top15">
            <%= skill_fields.text_field :name, class: 'form-control pass_text col-lg-12', placeholder: 'Skill name' %>
          </div>
          <div class="input-group col-lg-12 margin-top15">
            <%= skill_fields.text_field :work_ref, class: 'form-control pass_text col-lg-12', placeholder: 'Time spent' %>
          </div>
          <div class="input-group col-lg-12 margin-top15">
            <%= skill_fields.text_field :company, class: 'form-control pass_text col-lg-12', placeholder: 'Company' %>
          </div>
          <div class="input-group col-lg-12 margin-top15">
            <%= skill_fields.text_field :time_spent, class: 'form-control pass_text col-lg-12', placeholder: 'Founded'%>
          </div>
        <% end %>
      </div>
      <div class=" margin-top25">
      	<%= f.submit "CREATE", :class => 'btn btn-default btn_clear', :id => "submit_btn", :name => "create_user_btn"%>
      </div>

<% end %>
  
<script>
  $('#add_pro_pic').click(function(){
    console.log('click change_pro_pic');
    $('#user_pic').trigger('click');
  });

  $('#user_pic').change(function(){
    read_image_src(this);
  });

  function read_image_src(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();
      reader.onload = function (e) {
        $('#new_user_img').attr('src', e.target.result);
      }
      reader.readAsDataURL(input.files[0]);
    }
  }

  $('#create_user').ajaxForm({
    success: function() {
      console.log('user image successfully uploaded')
    },
    complete: function(xhr) {
      $(".fourth_col").show();
      $("#user_col3").html(xhr.responseText);
      show_next_step(".third_col",".fourth_col");
      $('#create_user').trigger("reset");
    }
  });
</script>
